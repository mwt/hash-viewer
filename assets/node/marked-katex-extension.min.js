!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("katex")):"function"==typeof define&&define.amd?define(["katex"],n):(e="undefined"!=typeof globalThis?globalThis:e||self).markedKatex=n(e.katex)}(this,function(e){"use strict";const n=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1(?=[\s?!\.,:？！。，：]|$)/,t=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1/,r=/^(\${1,2})\n((?:\\[^]|[^\\])+?)\n\1(?:\n|$)/;function i(n,t){return r=>e.renderToString(r.text,{...n,displayMode:r.displayMode})+(t?"\n":"")}function o(e,r){const i=e&&e.nonStandard,o=i?t:n;return{name:"inlineKatex",level:"inline",start(e){let n,t=e;for(;t;){if(n=t.indexOf("$"),-1===n)return;if(i?n>-1:0===n||" "===t.charAt(n-1)){if(t.substring(n).match(o))return n}t=t.substring(n+1).replace(/^\$+/,"")}},tokenizer(e,n){const t=e.match(o);if(t)return{type:"inlineKatex",raw:t[0],text:t[2].trim(),displayMode:2===t[1].length}},renderer:r}}function a(e,n){return{name:"blockKatex",level:"block",tokenizer(e,n){const t=e.match(r);if(t)return{type:"blockKatex",raw:t[0],text:t[2].trim(),displayMode:2===t[1].length}},renderer:n}}return function(e={}){return{extensions:[o(e,i(e,!1)),a(e,i(e,!0))]}}});